{% extends "cspace_django_site/base_site.html" %}
{% load i18n admin_static %}

{% block branding %}
    <h2 style="text-align:center; margin: 0px"><img alt="mainheader" style="height: 120px;" src="../pahma_project_static/cspace_django_site/images/HearstLogoGoogley.png"/></h2>
    <style>
    h1 {
    height: 130px; /* The height of the tallest image referenced above in background-image */
    }
    </style>
{% endblock %}

{% block content %}
    <!-- uses jQuery masonry -->
    <script src="{% static "js/jquery-1.7.1.min.js" %}"></script>
    <script src="{% static "js/jquery.masonry.min.js" %}"></script>
    <style>
        .item {
            width: 105px;
            margin: 5px;
            float: left;
        }

        #container {
            width: inherit;
            margin: 15px;
        }
    </style>
    {% if error %}
        <p style="color: red;">Please submit a search term.</p>
    {% endif %}
    <form action="" method="get">
    <div style="text-align: center">
        <label for="text-input">&nbsp;</label>
        <input aria-labelledby="text-input" type="text" name="text" size="60" id="text" value="{{ text }}"><br/>
        <input type="hidden" name="maxresults" value="{{ maxresults }}">
        <input type="hidden" name="pixonly" value="{{ pixonly }}">
        <input type="submit" name="submit" value="I'm feeling lucky" style="margin: 20px;">
        <input type="submit" name="submit" value="Search the Hearst Metadata" style="margin: 20px;">
        <input type="submit" name="submit" value="Search the Hearst Images" style="margin: 20px;">
    </div>
        {% for field in form.hidden_fields %}
            <div style="display:none;">{{ field }}</div>
        {% endfor %}

        <div style="margin: 0px 80px 0px">
        <hr/>
        {% if errormsg %}
            <span style="color: red">{{ errormsg }}</span>
        {% endif %}
        {% if count > 0 %}
            About {{ count }} results ({{ imagecount }} images)
        {% endif %}
        {% if time %}
            ({{ time }} seconds)
            <hr/>
        {% endif %}
        <div>
    </form>
    {% if resultType == 'metadata' %}
        {% include "imagineCompact.html" %}
    {% else %}
    <div id="masonrycontainer">
        {% for item in items %}
            <div class="item" style="background-color: #f0f0f0; padding: 3px; min-width: 170px;">
                {% if item.blobs %}
                    {% for t in item.blobs %}
                        <a target="image"
                           href="http://dev.cspace.berkeley.edu/pahma_project/imageserver/blobs/{{ t }}/derivatives/OriginalJpeg/content">
                            <img src="http://dev.cspace.berkeley.edu/pahma_project/imageserver/blobs/{{ t }}/derivatives/Thumbnail/content">
                        </a>
                    {% endfor %}
                    <br/><a target="cspace"
                            href="../search/search?displayType=full&maxresults=1&resultsOnly=True&text=%22{{ item.accession }}%22">{{ item.accession }}</a>
                    <br/><b>{{ item.mainentry }}</b>
                {% endif %}
            </div>
        {% endfor %}

    </div><!-- #masonrycontainer -->
    {% endif %}
    <script>
        var $container = $('#masonrycontainer');
        $container.imagesLoaded(function () {
            $container.masonry({
                itemSelector: '.item',
                isAnimated: true
            });

        });
    </script>
{% endblock %}
